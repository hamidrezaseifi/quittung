<?xml version="1.0" encoding="UTF-8"?>

<?import de.seifi.rechnung_manager_app.ui.tablecell.*?>
<?import javafx.scene.control.*?>
<?import de.seifi.rechnung_manager_app.ui.TextObserverDatePicker?>
<?import javafx.scene.control.cell.*?>
<?import javafx.scene.layout.*?>

<?import de.seifi.rechnung_manager_app.ui.IntegerTextField?>
<?import de.seifi.rechnung_manager_app.ui.tablecell.kostenvoranschlag.KostenvoranschlagProduktListTableCellFactory?>
<?import de.seifi.rechnung_manager_app.ui.tablecell.kostenvoranschlag.KostenvoranschlagReportToolsTableCellFactory?>
<GridPane fx:id="rootPane" alignment="TOP_LEFT" xmlns="http://javafx.com/javafx/16" xmlns:fx="http://javafx.com/fxml/1"
          fx:controller="de.seifi.rechnung_manager_app.controllers.KostenvoranschlagReportController">
    <columnConstraints>
        <ColumnConstraints hgrow="ALWAYS" />
    </columnConstraints>
    <rowConstraints>
        <RowConstraints prefHeight="40" vgrow="NEVER" />
        <RowConstraints fx:id="filterRow" />
        <RowConstraints vgrow="ALWAYS" />
    </rowConstraints>
    <children>
            
        <HBox alignment="CENTER_RIGHT" spacing="10" GridPane.columnIndex="0" fx:id="toolbarPane" GridPane.rowIndex="0" style="-fx-padding: 5px;">
            <Button alignment="CENTER_RIGHT" onAction="#search" prefHeight="26" prefWidth="110" styleClass="search-button" text="Suchen" />
            <Label fx:id="lblFilter" styleClass="filter-label"></Label>
            <Button alignment="CENTER_RIGHT" onAction="#printRechnung" prefHeight="26" prefWidth="116" styleClass="print-button" text="Drucken" />
            <Button alignment="CENTER_RIGHT" onAction="#closeRechnung" prefHeight="26" prefWidth="116" styleClass="cancel-button" text="SchlieÃŸen" />

        </HBox>
        <HBox alignment="CENTER_LEFT" fx:id="filterPane" spacing="10" GridPane.columnIndex="0" GridPane.rowIndex="1" style="-fx-padding: 5px;" visible="false">
            <Label text="Von"></Label>
            <TextObserverDatePicker fx:id="dtFrom" prefHeight="26" prefWidth="130" ></TextObserverDatePicker>
            <Label text="Bis"></Label>
            <TextObserverDatePicker fx:id="dtTo" prefHeight="26" prefWidth="130" ></TextObserverDatePicker>
            <Label text="Rechnungsnummer"></Label>
            <IntegerTextField fx:id="txtNummer"></IntegerTextField>
            <Label text="Kunde"></Label>
            <Label fx:id="lblCustomer" styleClass="report-customer-label" prefWidth="170"></Label>
            <Button onAction="#selectCustomer" styleClass="report-customer-select-button" prefWidth="26" prefHeight="26"></Button>
            <Button onAction="#removeCustomer" styleClass="report-customer-remove-button" prefWidth="26" prefHeight="26"></Button>
            <Label text="Status"></Label>
            <ComboBox fx:id="cmbStatus" styleClass="report-status-checkbox" prefWidth="170"></ComboBox>

        </HBox>

        <TableView fx:id="reportTableView" GridPane.columnIndex="0" GridPane.rowIndex="2" editable="false">
            <columns>
                <TableColumn fx:id="datumColumn" editable="false" sortable="true" prefWidth="120.0" text="Datum">
                    <cellValueFactory>
                        <PropertyValueFactory property="created" />
                    </cellValueFactory>

                </TableColumn>
                <TableColumn fx:id="nummerColumn" editable="false" sortable="true" prefWidth="80.0" text="Nummer">
                    <cellValueFactory>
                        <PropertyValueFactory property="nummer" />
                    </cellValueFactory>

                </TableColumn>
                <TableColumn fx:id="customerColumn" text="Kunde" editable="false" sortable="true" prefWidth="90">
                    <cellValueFactory>
                        <PropertyValueFactory property="customer" />
                    </cellValueFactory>

                </TableColumn>
                <TableColumn fx:id="statusColumn" text="Status" editable="false" sortable="true" prefWidth="50">
                    <cellValueFactory>
                        <PropertyValueFactory property="status" />
                    </cellValueFactory>

                </TableColumn>
                <TableColumn fx:id="produktListColumn" prefWidth="120" text="Produkte" editable="false" sortable="false">
                    <cellValueFactory>
                        <PropertyValueFactory property="produktListItem" />
                    </cellValueFactory>
                    <cellFactory>
                        <KostenvoranschlagProduktListTableCellFactory isReport="true"  />
                    </cellFactory>

                </TableColumn>
                <TableColumn fx:id="gesamtColumn" editable="false" text="Endsumme" sortable="true" prefWidth="120">
                    <cellValueFactory>
                        <PropertyValueFactory property="totalPrise" />
                    </cellValueFactory>

                </TableColumn>
                <TableColumn fx:id="toolsColumn" text="..." prefWidth="100" editable="false" sortable="false">
                    
                    <cellFactory>
                        <KostenvoranschlagReportToolsTableCellFactory />
                    </cellFactory>
                </TableColumn>
            </columns>

        </TableView>
        
    </children>
</GridPane>
